<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ATEC 인사관리(근태) 프로그램</title>
<style>
  body {font-family:'Pretendard','Noto Sans KR',sans-serif;background:#f5f6f9;margin:0;padding:0;color:#111;}
  header {background:#fff;padding:20px 30px;font-weight:800;border-bottom:1px solid #e5e7eb;}
  main {max-width:1000px;margin:30px auto;padding:0 20px;}
  .card {background:#fff;border-radius:16px;box-shadow:0 4px 16px rgba(0,0,0,0.05);padding:20px;margin-bottom:20px;}
  .upload-area{display:flex;gap:20px;flex-wrap:wrap;}
  .upload-card{flex:1 1 48%;border:2px dashed #d1d5db;border-radius:12px;padding:20px;text-align:center;}
  .btn{background:#111;color:#fff;border:none;border-radius:12px;padding:12px 24px;cursor:pointer;font-weight:700;}
  .btn:hover{background:#2563eb;}
  label.pick{background:#2563eb;color:#fff;padding:10px 18px;border-radius:12px;font-weight:700;cursor:pointer;}
  label.pick.flash{background:#16a34a;animation:flash 1.2s ease-out;}
  @keyframes flash{0%{box-shadow:0 0 0 0 rgba(22,163,74,0.6);}80%{box-shadow:0 0 0 20px rgba(22,163,74,0);}100%{box-shadow:0 0 0 0 rgba(22,163,74,0);}}
  input[type=file]{display:none;}
  .filename{display:block;color:#6b7280;margin-top:8px;}
  nav{text-align:center;margin-bottom:24px;}
  nav button{margin:0 8px;padding:10px 20px;border-radius:10px;border:1px solid #e5e7eb;background:#fff;cursor:pointer;font-weight:600;}
  nav button.active{background:#2563eb;color:#fff;}
  .summary{display:flex;justify-content:space-around;text-align:center;margin-top:20px;}
  .summary h3{margin:4px 0;font-size:1rem;color:#6b7280;}
  .summary strong{display:block;font-size:2rem;}
  canvas{max-width:220px;height:auto;}
  table{width:100%;border-collapse:collapse;margin-top:10px;}
  th,td{border-bottom:1px solid #e5e7eb;padding:8px;text-align:center;}
  th{background:#f3f4f6;}
</style>
</head>
<body>
<header>ATEC 인사관리(근태) 프로그램</header>
<main>
  <nav>
    <button class="active" data-page="1">① 업로드</button>
    <button data-page="2">② 리포트</button>
    <button data-page="3">③ 세부내역</button>
  </nav>

  <section id="page1" class="card">
    <h2>안내사항</h2>
    <p>✔ 산정기간: 전월 21일 ~ 당월 20일 (결재 완료 기준)</p>
    <p>✔ 휴게시간: 4시간 초과 시 1시간 부여</p>
    <p>✔ 주 52시간 근무제에 따라 휴일/야간근무는 주 12시간 이내 신청 가능</p>
    <p>✔ 필요 RAW 데이터(2개)</p>
    <p>1) 그룹웨어-시간외근무 승인(관리자) 데이터<br>2) ERP-책정임근현황(통상시급)</p>

    <div class="upload-area">
      <div class="upload-card">
        <label class="pick" for="file1">근태 RAW 업로드</label>
        <input type="file" id="file1" accept=".xlsx" />
        <span class="filename" id="file1name">선택된 파일 없음</span>
      </div>
      <div class="upload-card">
        <label class="pick" for="file2">통상시급 업로드</label>
        <input type="file" id="file2" accept=".xlsx" />
        <span class="filename" id="file2name">선택된 파일 없음</span>
      </div>
    </div>
    <div style="text-align:center;margin-top:20px;">
      <button class="btn" id="startBtn" disabled>시뮬레이션 시작</button>
    </div>
  </section>

  <section id="page2" class="card" style="display:none;">
    <div class="summary">
      <div>
        <h3>총 적용시간</h3><strong id="appliedTime">218.0h</strong>
        <p>총 근무시간 <strong id="workTime">237.0h</strong></p>
        <p>총 수당 <strong id="totalPay">₩2,150,000</strong></p>
      </div>
      <div>
        <h3>연장근무</h3><strong id="overTime">58.0h</strong><p>₩870,000</p>
      </div>
      <div>
        <h3>휴일근무</h3><strong id="holidayTime">24.0h</strong><p>₩320,000</p>
      </div>
    </div>
    <div style="display:flex;justify-content:center;gap:40px;margin-top:30px;">
      <canvas id="chartOver"></canvas>
      <canvas id="chartHoliday"></canvas>
    </div>
  </section>

  <section id="page3" style="display:none;">
    <div class="card">
      <h2>근태현황</h2>
      <table id="tbl1"><thead><tr><th>데이터 없음</th></tr></thead></table>
    </div>
    <div class="card">
      <h2>근태정리</h2>
      <table id="tbl2"><thead><tr><th>데이터 없음</th></tr></thead></table>
    </div>
    <div class="card">
      <h2>익월적용</h2>
      <table id="tbl3"><thead><tr><th>데이터 없음</th></tr></thead></table>
    </div>
  </section>
</main>

<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const pages=[document.getElementById('page1'),document.getElementById('page2'),document.getElementById('page3')];
document.querySelectorAll('nav button').forEach(btn=>{
  btn.addEventListener('click',()=>{
    document.querySelectorAll('nav button').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    const idx=btn.dataset.page;
    pages.forEach((p,i)=>p.style.display=(i+1==idx)?'block':'none');
  });
});
let f1=false,f2=false;
const f1input=document.getElementById('file1'),f2input=document.getElementById('file2');
f1input.addEventListener('change',()=>{f1=true;document.getElementById('file1name').innerText=f1input.files[0].name;flashLabel('file1');checkReady();});
f2input.addEventListener('change',()=>{f2=true;document.getElementById('file2name').innerText=f2input.files[0].name;flashLabel('file2');checkReady();});
function flashLabel(id){const lbl=document.querySelector('label[for='+id+']');lbl.classList.add('flash');setTimeout(()=>lbl.classList.remove('flash'),1200);}
function checkReady(){document.getElementById('startBtn').disabled=!(f1&&f2);}
document.getElementById('startBtn').addEventListener('click',()=>{
  document.querySelector('nav button[data-page="2"]').click();
  setTimeout(()=>makeCharts(),300);
});
function makeCharts(){
  const ctx1=document.getElementById('chartOver'),ctx2=document.getElementById('chartHoliday');
  new Chart(ctx1,{type:'doughnut',data:{labels:['연장근무','나머지'],datasets:[{data:[58,160],backgroundColor:['#ef4444','#e5e7eb']}]},options:{plugins:{legend:{display:false}}}});
  new Chart(ctx2,{type:'doughnut',data:{labels:['휴일근무','나머지'],datasets:[{data:[24,194],backgroundColor:['#2563eb','#e5e7eb']}]},options:{plugins:{legend:{display:false}}}});
}
</script>
</body>
</html>
